package com.revshop.service;
import java.sql.SQLException;
import java.util.Scanner;
import com.revshop.dao.SellerDAO;
import com.revshop.model.Product;

public class SellerService {
	 private SellerDAO sellerDAO = new SellerDAO();
	    private Scanner sc = new Scanner(System.in);
	    public void viewSellerProducts(int sellerId) {
	        try {
	            sellerDAO.viewProducts(sellerId);
	        } catch (SQLException e) {
	            System.out.println("Error fetching products: " + e.getMessage());
	            e.printStackTrace();
	        }
	    }
	    public void addProduct(int sellerId, String name, double price, int stock, String category, String description) {
	        try {
	            sellerDAO.addProduct(sellerId, name, price, stock, category, description);
	            System.out.println("Product added successfully.");
	        } catch (SQLException e) {
	            System.out.println("Error adding product: " + e.getMessage());
	            e.printStackTrace();
	        }
	    }
	    public void updateProduct(int productId, String name, double price, int stock, String category, String description) {
	        try {
	            sellerDAO.updateProduct(productId, name, price, stock, category, description);
	            System.out.println("Product updated successfully.");
	        } catch (SQLException e) {
	            System.out.println("Error updating product: " + e.getMessage());
	            e.printStackTrace();
	        }
	    }
	    public void deleteProduct(int productId, int sellerId) {
	        try {
	            sellerDAO.deleteProduct(productId, sellerId);
	            System.out.println("Product deleted successfully.");
	        } catch (SQLException e) {
	            System.out.println("Error deleting product: " + e.getMessage());
	            e.printStackTrace();
	        }
	    }
	    public void sellerMenu() throws SQLException {
	        while(true) {
	            System.out.println("\n===== SELLER MENU =====");
	            System.out.println("1. View Products");
	            System.out.println("2. Add Product");
	            System.out.println("3. Update Product");
	            System.out.println("4. Delete Product");
	            System.out.println("5. Logout");
	            System.out.print("Choice: ");
	            int choice = Integer.parseInt(sc.nextLine());

	            switch(choice) {
	                case 1:
	                    dao.viewProducts();
	                    break;

	                case 2:
	                    System.out.print("Enter Name: ");
	                    String name = sc.nextLine();
	                    System.out.print("Enter Price: ");
	                    double price = Double.parseDouble(sc.nextLine());
	                    System.out.print("Enter Stock: ");
	                    int stock = Integer.parseInt(sc.nextLine());
	                    System.out.print("Enter Category: ");
	                    String category = sc.nextLine();
	                    System.out.print("Enter Description: ");
	                    String desc = sc.nextLine();
	                    dao.addProduct(new Product(name, price, stock, category, desc));
	                    break;

	                case 3:
	                    System.out.print("Enter Product ID to update: ");
	                    int id = Integer.parseInt(sc.nextLine());
	                    System.out.print("Enter New Name: ");
	                    String newName = sc.nextLine();
	                    System.out.print("Enter New Price: ");
	                    double newPrice = Double.parseDouble(sc.nextLine());
	                    System.out.print("Enter New Stock: ");
	                    int newStock = Integer.parseInt(sc.nextLine());
	                    System.out.print("Enter New Category: ");
	                    String newCategory = sc.nextLine();
	                    System.out.print("Enter New Description: ");
	                    String newDesc = sc.nextLine();
	                    dao.updateProduct(new Product(id, newName, newPrice, newStock, newCategory, newDesc));
	                    break;

	                case 4:
	                    System.out.print("Enter Product ID to delete: ");
	                    int delId = Integer.parseInt(sc.nextLine());
	                    dao.deleteProduct(delId);
	                    break;

	                case 5:
	                    System.out.println("Logged out successfully!");
	                    return;

	                default:
	                    System.out.println("Invalid choice!");
	            }
	        }
	    }

}
