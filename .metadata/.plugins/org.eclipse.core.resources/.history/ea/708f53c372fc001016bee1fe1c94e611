package com.revshop.service;
import java.sql.SQLException;
import java.util.Scanner;
import com.revshop.util.DBConnection;
import com.revshop.dao.cartDAO;
import java.sql.PreparedStatement;
import java.sql.Connection;


public class CheckoutService {
	private cartDAO cartDao1 = new cartDAO(); // assuming you have this
    private Scanner sc = new Scanner(System.in);
    
    public void clearCart(int userId) throws SQLException {
        String sql = "DELETE FROM cart WHERE user_id = ?";
        PreparedStatement ps = con.prepareStatement(sql);
        ps.setInt(1, userId);
        
        ps.executeUpdate();
    }

    public void checkout(int userId) throws SQLException {
        System.out.println("\n===== CHECKOUT =====");

        // 1. View cart before checkout
        cartDao1.viewCart(userId);

        // 2. Get shipping and billing info
        sc.nextLine(); // consume leftover newline
        System.out.print("Enter shipping address: ");
        String shipping = sc.nextLine();
        System.out.print("Enter billing address: ");
        String billing = sc.nextLine();

        // 3. Process order (here, just simulate)
        System.out.println("Order placed successfully!");
        System.out.println("Shipping to: " + shipping);
        System.out.println("Billing to: " + billing);

        // 4. Clear cart after checkout
        cartDao1.clearCart(userId);
        System.out.println("Cart cleared after checkout.");
    }

}
